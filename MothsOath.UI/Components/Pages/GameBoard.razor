@page "/"
@rendermode InteractiveServer 
@inject GameStateManager GameState 

<PageTitle>Moth's Oath</PageTitle>

<h1>Moth's Oath - Tabuleiro de Jogo</h1>

@if (GameState.Player != null)
{
    <div>
        <h2>Inimigos</h2>
        @if (GameState.Enemies.Any())
        {
            <div class="enemy-container">
                @foreach (var enemy in GameState.Enemies)
                {
                    <div class="enemy-card">
                        <p><strong>@enemy.Name</strong></p>
                        <p>HP: @enemy.CurrentHP / @enemy.MaxHP</p>
                    </div>
                }
            </div>
        }
        else
        {
            <p>Nenhum inimigo no campo.</p>
        }
    </div>

    <hr />

    <div>
        <h2>Jogador</h2>
        <div class="player-card">
            <p><strong>@GameState.Player.Name</strong></p>
            <p>HP: @GameState.Player.CurrentHP / @GameState.Player.MaxHP</p>
        </div>
    </div>
}
else
{
    <p>O jogo ainda não começou.</p>
}

<hr />

<button class="start-button" @onclick="StartGame">Iniciar Novo Combate</button>

@code {
    private void StartGame()
    {
        GameState.StartNewCombat();
    }
}